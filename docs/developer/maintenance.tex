\section{Maintenance on commute.napier.ac.uk}

These commands use absolute paths which exist on commute.napier.ac.uk. The paths in these commands will likely need to be changed if running on a different machine.

\subsection{Switching from testing to production}

\begin{minted}{bash}
	docker-compose down
	docker-compose -f /home/40180582/Napier-Map-Elites/docker-compose.production.yml build
	docker-compose -f /home/40180582/Napier-Map-Elites/docker-compose.production.yml up -d
\end{minted}

\subsection{Switching from production to testing}

\begin{minted}{bash}
	docker-compose down
	docker-compose build
	docker-compose up -d
\end{minted}

\subsection{Updating SSL certificates}

The server SSL certificates are generated using LetsEncrypt\footnote{https://letsencrypt.org/}. To update them run the following commands.

\begin{minted}{bash}
	docker-compose down
	docker run --rm -it -p 80:80 -v /etc/letsencrypt:/etc/letsencrypt certbot/certbot renew
	cp /etc/letsencrypt/live/commute.napier.ac.uk/* $SSL_LOCATION
	docker-compose -f /home/40180582/Napier-Map-Elites/docker-compose.production.yml up -d
\end{minted}

\subsection{Manually adding a solutions zip file}

To manually add a solutions file to the server you simply need to copy it to \mintinline{bash}{$SOLUTIONS_FOLDER}.  An example is shown below where it is assumed \mintinline{bash}{$SOLUTIONS_FOLDER} has been set to the same value as the remote server and \mintinline{bash}{$SOLUTIONS_FILE}, \mintinline{bash}{$CSV_FILE} and \mintinline{bash}{$REMOTE_USERNAME} have been set.

\begin{minted}{bash}
	mv "$SOLUTIONS_FILE" "$(md5sum $CSV_FILE | cut -d ' ' -f 1).zip"
	scp "$SOLUTIONS_FILES" "$REMOTE_USERNAME@commute.napier.ac.uk:$SOLUTIONS_FOLDER"
\end{minted}
